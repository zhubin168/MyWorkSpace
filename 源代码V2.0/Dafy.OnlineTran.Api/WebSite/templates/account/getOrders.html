<div class="panel self-panel">
	<div class="panel-heading">
		查询条件
	</div>
	<div class="panel-body">
		<div class="form-horizontal" role="form">
			<div class="form-group">
				<label for="firstname" class="col-md-1 control-label">搜索词</label>
				<div class="col-md-2">
					<input class="form-control" type="text" ng-model="parm.paraName" placeholder="输入预约人姓名或电话" />
				</div>
				<label for="firstname" class="col-md-1 control-label">产品类型</label>
				<div class="col-md-2">
					<select class="form-control" ng-model="parm.type">
						<option value="">全部</option>
						<option value="1">保险类</option>
						<option value="2">投融类</option>
						<option value="3">其他类</option>
					</select>-
				</div>
				<label for="firstname" class="col-md-1 control-label">预约状态</label>
				<div class="col-md-2">
					<select class="form-control" ng-model="parm.status">
						<option value="">全部</option>
						<option value="0">待处理</option>
						<option value="1">已受理</option>
						<option value="2">安排购买中</option>
						<option value="3">已完成</option>
						<option value="4">不受理</option>
						<option value="5">已终止</option>
					</select>-
				</div>
				<div class="col-md-3">
					<button class="btn btn-primary" ng-click="getOrders()"> 
			          <span class="glyphicon glyphicon-search"></span>搜索 
			     </button>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="panel self-panel">
	<div class="panel-heading">
		订单管理列表
	</div>
	<div class="panel-body scroll">
		<table class="table table-striped table-bordered table-hover dataTable no-footer" dw-loading="getOrders" dw-loading-options="{active: true,text: '数据加载中，请稍后...',spinnerOptions: {color: '#00C4CA'}}">
			<thead>
				<tr>
					<th>序号</th>
					<th>预约编号</th>
					<th>预约人姓名</th>
					<th>预约人电话</th>
					<th>产品名称</th>
					<th>产品类型</th>
					<td>金额（元）</th>
					<th>预约时间</th>
					<th>状态</th>
					<th style="width: 60px;">操作</th>
					<th style="width: 60px;">查看</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="item in getOrdersList">
					<td>{{$index+1}}</td>
					<td>{{item.clientUid }}</td>
					<td>{{item.clientName }}</td>
					<td>{{item.clientPhone }}</td>
					<td>{{item.productName }}</td>
					<td ng-if="item.productType==1">保险类</td>
					<td ng-if="item.productType==2">投融类</td>
					<td ng-if="item.productType==3">其他类</td>
					<td>{{item.prodcutPrice }}</td>
					<td>{{item.createTime | date:'yyyy-MM-dd HH:mm'}}</td>
					<td ng-if="item.status==0">待处理</td>
					<td ng-if="item.status==1">已受理</td>
					<td ng-if="item.status==2">安排购买中</td>
					<td ng-if="item.status==3">已完成</td>
					<td ng-if="item.status==4">不受理</td>
					<td ng-if="item.status==5">已终止</td>
					<td>
					 <button class="btn btn-primary btn-sm" ng-click="updateOrders(item.oid,item.status)">更新状态 <span class="glyphicon glyphicon-pencil"></span> </button>
					</td>
					<td>
					 <button class="btn btn-primary btn-sm" ng-click="opRecord(item.oid,item.record)">操作记录 <span class="glyphicon glyphicon-pencil"></span> </button>
					</td>
				</tr>
			</tbody>
		</table>
		<!--描述：分页事件-->
		<div class="pull-right">
			<ul uib-pagination boundary-links="true" max-size="10" items-per-page="parm.pageSize" total-items="totalItems" ng-change="pageChanged()" ng-model="parm.pageIndex" class="pagination-sm" previous-text="上一页" next-text="下一页" boundary-link-numbers="true" first-text="第一页" last-text="最后一页"></ul>
		</div>
	</div>
</div>
<script type="text/ng-template" id="updateOrders.html">
			<div class="modal-body">
				<form class="form-horizontal" role="form" name="myForm"  ng-submit="ok(configItem.status,configItem.remark)" novalidate>
					<div class="form-group">
						<label class="col-sm-2 control-label">预约状态</label>
						<div class="col-sm-8">
						    <select class="form-control" ng-model="configItem.status" required>
							<option value="0" selected="selected">待处理</option>
							<option value="1">已受理</option>
							<option value="2">安排购买中</option>
							<option value="3">已完成</option>
							<option value="4">不受理</option>
							<option value="5">已终止</option>
						     </select>
						</div>
						<label class="control-label" style="color: red;">*</label>
					</div>
				    <div class="form-group">
						<label class="col-sm-2 control-label">更新备注</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" placeholder="请输入更新备注" ng-model="configItem.remark"  required>
						</div>
						<label class="control-label" style="color: red;">*</label>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="submit" class="btn btn-primary" ng-disabled="myForm.$invalid" ng-click="ok()">
                      保存
      			</button>
				<button class="btn btn-warning" ng-click="cancel()">取消</button>
			</div>
		</form>
	</script>
	
<script type="text/ng-template" id="opRecord.html">
			<div class="modal-body">
				       <div class="modal-header">
            <h4 class="modal-title" id="modal-title">操作记录</h4>
        </div>	
				<div class="modal-body">
						<p>{{configItem.record}}</p>
				</div>
			</div>
			<div class="modal-body">
				<button class="btn btn-warning" ng-click="cancel()">取消</button>
			</div>
	</script>